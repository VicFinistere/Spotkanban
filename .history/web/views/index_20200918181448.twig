{% extends "layout.html" %}

{% block content %}
<main role="main">

  <section class="jumbotron text-center">
    <div class="container">
      <h1>Kanban</h1>
      <p class="lead text-muted">That's a MySQL, PHP, Javascript kanban board !</p>
      <p>
      <button type="button" class="btn btn-primary my-2" data-toggle="modal" data-target="#myModal">Spotted !</button>
      <button type="button" class="btn btn-secondary my-2" data-toggle="modal" data-target="#myModal2">Love <3 </button>
      </p>
    </div>
  </section>

  <div class="album py-5 bg-light">
    <div class="container">

      <div class="row">
        <div class="col-md-3">
          <div class="card mb-3 shadow-sm">
            <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Backlog"><title>Placeholder</title><rect width="100%" height="100%" fill="#cb6217"/><text x="50%" y="50%" fill="#eceeef" dy=".3em">Backlog</text></svg>
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted"><p style="color:#cb6217">Next tasks...</p></small>
              </div>
                <ul class="list-group list-group-flush">
    {% for task in tasks %}
  {% if task.2 == "BACKLOG" %}
  <li class="list-group-item" onclick="openModal('{{task.0}}', '{{task.1}}', '{{task.2}}');">
  {{task.1}}
  </li>
  {% endif %}
  {% endfor %}
  </ul>
  <div class="card-body text-right">
    <button type="button" class="btn btn-light my-2"card-link" data-toggle="modal" data-target="#myInputModal">Add a task</button>
  </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card mb-3 shadow-sm">
            <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: To Do"><title>Placeholder</title><rect width="100%" height="100%" fill="#F95E5B"/><text x="50%" y="50%" fill="#eceeef" dy=".3em">To Do</text></svg>
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted"><p style="color:#F95E5B">Tasks</p></small>
              </div>
                <ul class="list-group list-group-flush">
    {% for task in tasks %}
  {% if task.2 == "TODO" %}
  <li class="list-group-item" onclick="openModal('{{task.0}}', '{{task.1}}', '{{task.2}}');">
  {{task.1}}
  </li>
  {% endif %}
  {% endfor %}
  </ul>
 <div class="card-body text-right">
    <button type="button" class="btn btn-light my-2"card-link" data-toggle="modal" data-target="#myInputModal">Add a task</button>
  </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card mb-3 shadow-sm">
            <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Doing"><title>Placeholder</title><rect width="100%" height="100%" fill="#6284FB"/><text x="50%" y="50%" fill="#eceeef" dy=".3em">Doing</text></svg>
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
              <small class="text-muted"><p style="color:#6284FB">Current tasks</p></small>
              </div>
              <ul class="list-group list-group-flush">
    {% for task in tasks %}
  {% if task.2 == "DOING" %}
 <li class="list-group-item" onclick="openModal('{{task.0}}', '{{task.1}}', '{{task.2}}');">
  {{task.1}}
  </li>
  {% endif %}
  {% endfor %}
  </ul>
  <div class="card-body text-right">
    <button type="button" class="btn btn-light my-2"card-link" data-toggle="modal" data-target="#myInputModal">Add a task</button>
  </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card mb-3 shadow-sm">
            <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Done"><title>Placeholder</title><rect width="100%" height="100%" fill="#2FB4DE"/><text x="50%" y="50%" fill="#eceeef" dy=".3em">Done</text></svg>
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted"><p style="color:#2FB4DE">Achieved</p></small>
              </div>
                <ul class="list-group list-group-flush">
    {% for task in tasks %}
  {% if task.2 == "DONE" %}
<li class="list-group-item" onclick="openModal('{{task.0}}', '{{task.1}}', '{{task.2}}');">
  {{task.1}}
  </li>
  {% endif %}
  {% endfor %}
  </ul>
  <div class="card-body text-right">
    <button type="button" class="btn btn-light my-2"card-link" data-toggle="modal" data-target="#myInputModal">Add a task</button>
  </div>
            </div>
          </div>
        </div>
        
    </div>
  </div>

</main>


<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
              <h4 class="modal-title">SpotKanban</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <p>SpotKanban is a PHP, MySQL, Javascript project for you !</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- Modal -->
<div id="myModal2" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
      <h4 class="modal-title">SpotKanban</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <p>With this board you can manage your tasks.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- Input Modal -->
<div id="myInputModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
      <h4 class="modal-title">Add a task</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <form>
        <label for="name">Task name:</label><br><input type="text" id="task-name" name="task-name"><br>
        <label for="description">Task description:</label><br><input type="text" id="task-description" name="task-description"><br>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- Task Modal -->
<div id="myTaskModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
              <h4 class="task-modal-title"></h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <p class="task-modal-text"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">

function openModal(index, name, status){
    $(".task-modal-title").html("Task : " + name);
    $(".task-modal-text").html(name + " (" + status + ")");
    $('#myTaskModal').modal();
}       
</script>
{% endblock %}
